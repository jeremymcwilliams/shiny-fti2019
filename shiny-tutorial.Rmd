---
title: "Shiny - FTI 2019"
output: html_notebook
---


## What is Shiny?

Shiny is an R package that makes it easy to build interactive web applications (apps) straight from R.

Let's look at some Shiny examples:
<br>
<a href="https://shiny.rstudio.com/gallery/telephones-by-region.html" target="_blank">Telephones by region</a>
<br>
<a href="https://shiny.rstudio.com/gallery/single-file-shiny-app.html" target="_blank">Random histogram</a>
<br>
<a href="https://shiny.rstudio.com/gallery/lego-set.html" target="_blank">Lego Set Database</a>



## Let's look under the hood of a Shiny App

Before doing anything, we need to load the Shiny library (click the play button to run the code):

```{r}
library(shiny)
```

A Shiny app has three main components:

* a user interface (ui) object

* a server function

* a call to the shinyApp function

Below is the code for a super basic Shiny app

```{r warning = FALSE}
ui <- basicPage("This is a real Shiny app") # the user interface

server <- function(input, output, session) { } #the server

shinyApp(ui = ui, server = server) # this launches your app
```

See if you can replicate this, except rename the variables ui to myUi, and server to myServer. Retype the code in the code block below, and run it (you don't need to type the comments)

```{r}

```


Ok, we have our first Shiny app! But it isn't very good. Let's expand on the user interface by creating some different areas:

```{r}
ui <- fluidPage(
  titlePanel("title panel"),

  sidebarLayout(
    sidebarPanel("sidebar panel"),
    mainPanel("main panel")
  )
)


server <- function(input, output, session) { } 

shinyApp(ui = ui, server = server) 

```

Try replicating this code in the box below, but change the title panel to say "Hello World!" instead of "title panel"

```{r}

```

## Styling the user interface (UI)

We can add content to our Shiny app by adding text to our panels, as you've just done by changing the contents of the title panel. In order to have more control over the appearance and functionality of our content, we can employ some basic HTML elements. 

Headings and paragraphs are two basic but very useful HTML tags.

Headings tags range from h1 to h6, h1 being the largest. Headings are bold by default, as opposed to paragraphs, which will just display regular text. The code below shows the syntax for adding headings and paragraphs to an app:

```{r}
ui <- fluidPage(
  mainPanel(
    h1("This is an h1 heading"),
    h2("This is an h2 heading"),
    h3("This is an h3 heading"),
    h4("This is an h4 heading"),
    h5("This is an h5 heading"),
    h6("This is an h6 heading"),
      
    p("This is a paragraph")
  )
)

server <- function(input, output, session) { } 
shinyApp(ui = ui, server = server) 
```

Try creating an h1 tag below that says "Hello World!"

```{r}
ui <- fluidPage(
  mainPanel(
    # add your code here
    
  )
)

server <- function(input, output, session) { } 
shinyApp(ui = ui, server = server) 
```


We can also use an HTML tag to create links on our Shiny app. The code below shows the syntax for adding a link:

```{r}
ui <- fluidPage(
    mainPanel(
      a("This is a link", href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/")
    )
)

server <- function(input, output, session) { } 
shinyApp(ui = ui, server = server) 
```

Try changing the link below to redirect to https://www.lclark.edu

```{r}
ui <- fluidPage(
    mainPanel(
      a("This is a link", href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/")
    )
)

server <- function(input, output, session) { } 
shinyApp(ui = ui, server = server) 
```


## Adding user inputs to the UI

There are a number of widgets we can add to our Shiny app for users to interact with. For now, we'll discuss a couple of basic examples: the dropdown selector and the slider input.

**Example code for a dropdown selector:**
```{r}
ui <- fluidPage(
  sidebarPanel(
    
    selectInput("select", h4("select box"), 
                choices = list("Choice 1" = 1, "Choice 2" = 2, "Choice 3" = 3), selected = 1) 
    
    # the 'selected' option defines which option is selected by default
  )
)

server <- function(input, output, session) { } 
shinyApp(ui = ui, server = server) 
```

Now try altering the code below so the choices read "red", "blue", and "yellow", and option 3 is selected by default:
```{r}
ui <- fluidPage(
  sidebarPanel(

    selectInput("select", h4("select box"), 
                choices = list("Choice 1" = 1, "Choice 2" = 2, "Choice 3" = 3), selected = 1)
  )
)

server <- function(input, output, session) { } 
shinyApp(ui = ui, server = server) 
```


**Example code for a slider input:**
```{r}
ui <- fluidPage(
  sidebarPanel(

    sliderInput("slider", h4("slider"), min = 0, max = 100, value = 50)
    
    # the 'value' option defines the default value for the slider
  )
)

server <- function(input, output, session) { } 
shinyApp(ui = ui, server = server) 
```

Now try altering the code below so the slider ranges between 50 and 500, and 100 is the default value:
```{r}
ui <- fluidPage(
  sidebarPanel(

    sliderInput("slider", h4("slider"), min = 0, max = 100, value = 50)
  )
)

server <- function(input, output, session) { } 
shinyApp(ui = ui, server = server) 
```



## Passing data from the user inputs to the main panel

In order to pass data from our user input to our display on the main panel, we have to write a short subroutine in the server function, which handles the inputs and outputs for our app.

Here is an example of what that might look like:
```{r}
ui <- fluidPage(
  sidebarPanel(
    # creating our dropdown and naming it 'dropdown1'
    selectInput("dropdown1", h4("select box"), 
                choices = list(
                  "Choice 1" = 1, 
                  "Choice 2" = 2, 
                  "Choice 3" = 3,
                  "Choice 4" = 4,
                  "Choice 5" = 5
                  ), 
                selected = 1) # option 1 is selected by default
  ),
  
  mainPanel(
    # calling a function which we've written in the server function
    h4( # function call is wrapped in h4 tags
      textOutput("dropdown_selected") 
      )
  )
)

server <- function(input, output, session) {
    # function to display selected option
    output$dropdown_selected <- renderText({ 
    paste("You have selected", input$dropdown1) # displaying current value of dropdown1
  })
} 
shinyApp(ui = ui, server = server) 
```

Now try copying the code into the box below and changing the output message to "Great job, you've selected" followed by the current value of 'dropdown1'
```{r}

```
If you need something else to do, try changing the main panel output to display as h2 instead of h4


## Creating a basic histogram


## Using a dataset


```{r}
ui <- fluidPage(
  titlePanel("Make a Histogram!"),
  
  sidebarLayout(
    sidebarPanel(
      helpText("Adjust the slider to update the histogram"),

      
      sliderInput("range", 
                  label = "Range of interest:",
                  min = 10, max = 100, value = c(10))
    ),
    
    mainPanel(

      plotOutput("selected_range")
    )
  )
)

server <- function(input, output) {
  

  
  output$selected_range <-renderPlot({
    hist(runif(input$range[1]), main="hello", xlab="Your selected number")
   

    
  })
  
}
shinyApp(ui = ui, server = server) 

```



